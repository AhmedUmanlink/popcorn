 <!-- Your component template -->


 <div class="container">

<div class="filters">
  <span class="filterToggler"><b><i class="fa-solid fa-filter"></i> Filters</b></span>
  
  <form action=""[formGroup]="movieService.filtersForm">
    <input type="text" value="reset filters " readonly (click)="movieService.filtersForm.reset();"><i class="fa-solid fa-rotate-right" (click)="movieService.filtersForm.reset();"></i>
        <select formControlName="selectedCategory" (change)="scrollup()" >
          <option  selected  disabled>Select a category</option>
          <option *ngFor="let genre of movieService.genres" [value]="genre.id">{{ genre.name }}</option>
        </select>
        <i class="fa-solid fa-rotate-right" (click)="movieService.filtersForm.get('selectedCategory')?.reset();"></i>
        <input  type="date" formControlName="start" ><i class="fa-solid fa-rotate-right" (click)="movieService.filtersForm.get('start')?.reset();"></i>
        <input   type="date" formControlName="end" ><i class="fa-solid fa-rotate-right" (click)="movieService.filtersForm.get('end')?.reset();"></i>
      </form>
      <br>
      <hr>
</div>

 <div class="moviesContainer" #moviesContainer infinite-scroll 
 (scrolled)="onScroll()">
<div class="mnf" *ngIf="movieService.originalMovies && movieService.originalMovies.length==0">
  <img src="../../assets/mvnotfnd.png" alt="movies not fund">
</div>
<div class="moviesTYpes">
  <span><b><i class="fa-solid fa-filter"></i> Filters</b></span>
  <span *ngIf="movieService.selectedtype=='discover'"  ><b>Discover All</b></span>
  <span *ngIf="movieService.selectedtype!=='discover'" (click)="movieService.originalMovies=[];movieService.currentPage =1;reload();" >Discover All</span>

  <span  *ngIf="movieService.selectedtype=='now_playing'"  ><b>Now Playing</b></span>
  <span *ngIf="movieService.selectedtype!=='now_playing'" (click)="movieService.originalMovies=[];movieService.currentPage =1;loadMovies('now_playing');">Now Playing</span>

  <span *ngIf="movieService.selectedtype=='top_rated'" ><b>Top Rated</b></span>
  <span *ngIf="movieService.selectedtype!=='top_rated'" (click)="movieService.originalMovies=[];movieService.currentPage =1;loadMovies('top_rated');">Top Rated</span>

  <span *ngIf="movieService.selectedtype=='popular'" ><b>Popular</b></span>
  <span *ngIf="movieService.selectedtype!=='popular'" (click)="movieService.originalMovies=[];movieService.currentPage =1;loadMovies('popular');">Popular</span>

  <span *ngIf="movieService.selectedtype=='upcoming'" ><b>Upcoming</b></span>
  <span *ngIf="movieService.selectedtype!=='upcoming'" (click)="movieService.originalMovies=[];movieService.currentPage =1;loadMovies('upcoming');">Upcoming</span>

</div>
<div class="movie_card" [id]="movie.id" *ngFor="let movie of movieService.originalMovies | movieFilter: movieService.filtersForm.value.selectedCategory :movieService.filtersForm.value.start :movieService.filtersForm.value.end">    <figure class="movie">
      <div class="movie__hero">
        <img [src]="'https://image.tmdb.org/t/p/w500/' + movie.poster_path" [alt]="movie.title" class="movie__img">
      </div>
      <div class="movie__content">
        <div class="movie__title">
          <h1 class="heading__primary">{{ movie.title }} <i class="fas fa-fire"></i></h1>
          <div *ngFor="let genreId of movie.genre_ids" class="movie__tag">#{{ getGenreName(genreId) }}</div>
        </div>
        <p class="movie__description">{{ movie.overview }}</p>
        <div class="movie__details">
          <p class="movie__detail"><span class="icons icons-red"><i class="fas fa-camera-retro"></i></span> Director Name</p>
          <p class="movie__detail"><span class="icons icons-grey"><i class="fas fa-clock"></i></span> {{ movie.release_date }}</p>
          <p class="movie__detail"><span class="icons icons-yellow"><i class="fas fa-file-invoice-dollar"></i></span> Popularity: {{ movie.popularity }}</p>
        </div>
        <div class="actions">
          <i class="fa-regular fa-heart bouncing-heart" *ngIf="!movieService.favoritesMovies.includes(movie.id)" (click)="addMovieToFavorites(movie.id,true)"></i>
          <i class="fa-solid fa-heart bouncing-heart" *ngIf="movieService.favoritesMovies.includes(movie.id)" (click)="addMovieToFavorites(movie.id,false)"></i>
          <i class="fa-regular fa-eye" *ngIf="!movieService.watchList.includes(movie.id)" (click)="addMovieToWatchList(movie.id,true)"></i>
          <i class="fa-solid fa-eye bouncing-heart" *ngIf="movieService.watchList.includes(movie.id)" (click)="addMovieToWatchList(movie.id,false)"></i>

          <span [routerLink]="['/movie-details',movie.id]"><i class="fa-solid fa-arrow-right"></i>  More info</span>
        </div>
      </div>
      <div class="movie__price">Rating: {{ movie.vote_average }}</div>
    </figure>
  </div>

      
 </div>

</div>

